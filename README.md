# 相対強度とチャートパターンに基づく株式スクリーニングエンジン

## 概要

このプロジェクトは、米国および日本市場における潜在的な取引機会を特定するために設計された、包括的な株式スクリーニングおよび分析エンジンです。IBDやマーク・ミネルヴィニによって広められた相対強度（RS）の概念と、古典的なテクニカルチャートパターンの自動検出を組み合わせて活用します。

このエンジンは、体系的に株式をフィルタリングし、そのモメンタムを計算し、強力な上昇トレンドを特定し、特定の買いシグナルパターンを検出し、有望な候補のチャートとシグナルリストを生成することを目的としています。

## 主な機能

- **相対強度（RS）計算**: マンスフィールド流の相対強度レーティングを実装し、各株式のパフォーマンスを市場全体と比較します。
- **テクニカルパターン認識**: VCP、カップウィズハンドル、ダブルボトムなど、さまざまな強気のチャートパターンを自動的にスクリーニングします。
- **ファンダメンタルズ・スクリーニング**: テクニカル分析の前に、基本的なファンダメンタルズチェックを実行します。
- **自動チャート作成**: 有効な買いシグナルごとに詳細な株価チャートを生成・保存します。
- **日米市場のサポート**: 米国と日本の両市場を分析するためのスクリプトが含まれています。

## 実行に関する重要な注意点

**警告: このリポジトリのスクリプトは、現状のままでは実行できません。** 動作させるには、ユーザーによる手動でのコード修正が必須となります。

主な問題点は以下の通りです。

1.  **ハードコードされた絶対パス**:
    すべてのシェルスクリプト (`.sh` ファイル) には、特定のGoogle Drive環境を指す絶対パスがハードコードされています。
    - **例 (`US_Daily.sh`内):** `cd '/content/drive/MyDrive/Screening/'`
    - **修正方法:** この `cd` コマンドを削除し、他のファイルパス（例: `STOCK_DIR1=/content/_files/US/`）も、自身のプロジェクトディレクトリを指すように修正する必要があります。

2.  **存在しないディレクトリへの参照**:
    スクリプトは `_scripts` というディレクトリ内のPythonスクリプトを実行しようとしますが（例: `python $SCRIPT_DIR/getList_US.py`）、このディレクトリはリポジトリ内に存在しません。
    - **修正方法:** Pythonスクリプトはリポジトリのルートディレクトリに存在するため、コマンドの `$SCRIPT_DIR/` の部分を削除する必要があります。

## ワークフロー（修正後の想定）

上記の問題を修正した場合、このエンジンのワークフローは大きく分けて2つのステージで構成されると想定されます。

#### ステージ1: 相対強度（RS）データの生成
スクリーニングの前提条件として、まず市場のRSデータを計算する必要があります。これは `relative-strength-us.py` や `relative-strength-jp.py` を直接実行することで行われると想定されます。

#### ステージ2: 日次・週次スクリーニングの実行
RSデータが準備できたら、`US_Daily.sh` や `JP_Weekly.sh` などを実行して、取引候補を特定します。

## プロジェクト構造
```
.
├── US_Daily.sh
├── US_Weekly.sh
├── JP_Daily.sh
├── JP_Weekly.sh
├── getRS_Rating.sh
│
├── getList_US.py
├── getList_JP.py
├── relative-strength-us.py
├── relative-strength-jp.py
├── chkData.py
├── isTrend.py
│
├── classCheckData.py
├── classDrawChart.py
├── classEarningsInfo.py
│
├── _files/
│   ├── RS/
│   ├── indexes/
└── ...
```

## 依存関係

このプロジェクトを動作させるには、いくつかのPythonライブラリが必要です。プロジェクトのルートに `requirements.txt` ファイルが含まれているので、以下のコマンドを使用して、必要なライブラリをすべてインストールできます。

```bash
pip install -r requirements.txt
```

主なライブラリは以下の通りです:
`pandas`, `numpy`, `yfinance`, `requests`, `pytz`, `beautifulsoup4`, `matplotlib`, `japanize-matplotlib`, `mplfinance`, `ta`, `openpyxl`
